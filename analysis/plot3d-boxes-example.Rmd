---
title: "Plot3d boxesexample"
output: html_document
---

# Packages and setup

```{r}
if (requireNamespace("devtools", quietly = TRUE)) {
  devtools::load_all()
} else {
  warning(
    "Package {devtools} is not available.\n",
    "You need to manually load functions from the project's `R/` folder.\n",
    call. = FALSE
  )
}

library(scatterplot3d)

db <- get_sample_data()
```

# Data

```{r}
# Db used
if (requireNamespace("DT", quietly = TRUE)) {
  DT::datatable(db) 
} else {
  db
}


processed_db <- summarize_3d(db)
processed_db
```

## Estract info

```{r}
purrr::walk(1:1e4, ~{
processed_db <- summarize_3d(db)
main_object <- processed_db[c("dim_max", "dim_med", "dim_min")] %>% 
  prepare_3d()
# main_object

min_object <- processed_db[c("X_min", "Y_min", "Z_min")] %>% 
  prepare_3d()
# min_object

max_object <- processed_db[c("X_max", "Y_max", "Z_max")] %>% 
  prepare_3d()
})
# max_object
```

# 3D Plot

```{r, webgl=TRUE}
scr <- scatterplot3d::scatterplot3d(
  max_object[[1]], max_object[[2]], max_object[[3]], 
  color = "red",
  xlab = "Largest dimension",
  ylab = "Medial dimension",
  zlab = "Smallest dimension",
  asp = 1,
  scale.y = max(max_object[[2]]) / max(max_object[[1]]),
  type = "h"
)

scr$points3d(
  main_object[[1]], main_object[[2]], main_object[[3]],
  col = "blue")
scr$points3d(
  min_object[[1]], min_object[[2]], min_object[[3]],
  col = "green")

title(
  "Boxes of target and reference objects",
  sub = "Points for target (blu), and largest (red) and smallest (green) in the category."
)
```


# System Info
<details>
  <summary>Click for System Info</summary>
```{r, echo = FALSE}
if (requireNamespace("devtools", quietly = TRUE)) {
  devtools::session_info()
} else {
  Sys.info()
  loadedNamespaces()
}
```
<details>

